# RAG Chat Storage Microservice - Environment Variables
# Copy this file to .env and update the values, or set them as environment variables

# =============================================================================
# REQUIRED VARIABLES
# =============================================================================

# Primary API Key for authentication
# This key is required for all API requests (except health checks and Swagger UI)
# Example: API_KEY_PRIMARY=your-primary-api-key
API_KEY_PRIMARY=

# =============================================================================
# OPTIONAL VARIABLES
# =============================================================================

# Secondary API Key for zero-downtime rotation (optional)
# During key rotation, both primary and secondary keys are accepted
# Example: API_KEY_SECONDARY=your-secondary-api-key
API_KEY_SECONDARY=

# Spring Profile (default: dev)
# Options: dev, qa, prod
# - dev: Development profile with H2 console enabled, DEBUG logging
# - qa: QA profile with INFO logging, H2 console disabled
# - prod: Production profile with WARN logging, H2 console disabled
SPRING_PROFILES_ACTIVE=dev

# =============================================================================
# RATE LIMITING CONFIGURATION
# =============================================================================

# Rate limit per API key (requests per minute)
# Default: 60
RATE_LIMIT_API_KEY_PER_MINUTE=60

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# H2 Database file path (relative to application working directory)
# Default: ./data/ragchat
# The database file will be created at: {H2_DATABASE_PATH}.mv.db
# Example: H2_DATABASE_PATH=./data/ragchat
H2_DATABASE_PATH=./data/ragchat

# Enable H2 Console (default: false)
# Set to 'true' to enable H2 web console at /h2-console
# WARNING: Disable in production for security
# Default: false (enabled automatically in dev profile)
ENABLE_H2_CONSOLE=false

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server port
# Default: 8080
SERVER_PORT=8080

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging level
# Options: TRACE, DEBUG, INFO, WARN, ERROR
# Default: INFO
# - dev profile: DEBUG
# - qa profile: INFO
# - prod profile: WARN
LOG_LEVEL=INFO

# =============================================================================
# DEVELOPMENT OPTIONS
# =============================================================================

# Load sample data on startup (default: false)
# Set to 'true' to create demo sessions and messages on application startup
# Useful for testing and demonstration
LOAD_SAMPLE_DATA=false

# =============================================================================
# USAGE EXAMPLES
# =============================================================================

# Local Development:
# export API_KEY_PRIMARY=dev-api-key-here
# export SPRING_PROFILES_ACTIVE=dev
# export ENABLE_H2_CONSOLE=true
# export LOG_LEVEL=DEBUG
# ./mvnw spring-boot:run

# Production:
# export API_KEY_PRIMARY=prod-api-key-here
# export API_KEY_SECONDARY=prod-secondary-key
# export SPRING_PROFILES_ACTIVE=prod
# export ENABLE_H2_CONSOLE=false
# export LOG_LEVEL=WARN
# ./mvnw spring-boot:run

# Docker Compose:
# export API_KEY_PRIMARY=your-api-key-here
# docker-compose up --build

# =============================================================================
# NOTES
# =============================================================================

# 1. API Key Requirements:
#    - Recommended: Use a cryptographically secure random string
#    - Store securely and never commit to version control

# 2. Database Path:
#    - Ensure the directory exists and is writable
#    - Data persists across restarts when using file-based H2
#    - In Docker, mount a volume for data persistence

# 3. Rate Limiting:
#    - Rate limits are per API key and per user (dual-layer)
#    - Limits reset every minute
#    - Exceeding limits returns 429 Too Many Requests

# 4. Profiles:
#    - Each profile has different default settings
#    - Profile-specific configs are in application-{profile}.yml
#    - Environment variables override profile defaults

# 5. Security:
#    - Never commit API keys to version control
#    - Use environment variables or secure secret management
#    - Disable H2 console in production
#    - Use HTTPS in production
